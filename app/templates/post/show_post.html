{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block app_content %}

<div>
  <h2 class="text-center">{{ post.title }}</h2>
  <p class="text-center" style="margin: 1.5rem 0">
    <span style="margin: 0 1rem"><a href="{{ url_for('user.show_user', id=post.author.id) }}">{{ post.author.username }}</a></span>
    <span style="margin: 0 1rem">{{ post.mtime }}</span>
  </p>
  <p style="font-size: 1.75rem; line-height: 2.75rem;">{{ post.content }}</p>
  {% if current_user.is_authenticated and current_user == post.author %}
    <br><br>
    <div class="text-center">
      <a class="btn btn-warning" style="margin: 0 0.5rem" href="{{ url_for('post.edit_post', id=post.id) }}">Edit</a>
      <a class="btn btn-danger" style="margin: 0 0.5rem" href="{{ url_for('post.delete_post', id=post.id) }}">Delete</a>
    </div>
  {% endif %}
</div>


<br><br>
<div>
  {% if current_user.is_authenticated %}
    <form class="form" method="post" role="form">
      {{ form.hidden_tag() }}
      {{ wtf.form_errors(form, hiddens="only") }}
      <div class="form-group required">
        <textarea class="form-control" id="content" name="content" required></textarea>
      </div>
      {{ wtf.form_field(form.submit) }}
    </form>
  {% endif %}
  {% for comment in post.comments %}
    <div class="card" style="margin: 1rem 0; box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);">
      <div class="card-body" style="padding: 0.5rem 1rem 0.25rem 1rem">
        <div class="card-title mb-1">{{ comment.content }}</div>
        <div class="text-right">
          <span style="margin-left: 1.5rem"><a href="{{ url_for('user.show_user', id=comment.author.id) }}" class="card-link text-muted">{{ comment.author.username }}</a></span>
          <span style="margin-left: 1.5rem" class="small text-muted">{{ comment.time }}</span>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

{% endblock %}
